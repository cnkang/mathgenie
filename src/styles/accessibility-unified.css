/* ===== UNIFIED WCAG 2.2 AAA ACCESSIBILITY COMPLIANCE ===== */

/* This file consolidates all accessibility fixes for maximum compliance */

/* WCAG 2.2 AAA requires minimum 44x44px touch targets for Level AAA compliance */

/* Screen reader only content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  white-space: nowrap;
  border: 0;
  clip: rect(0, 0, 0, 0);
}

/* CRITICAL: Universal touch target enforcement - covers ALL interactive elements */
*[onclick],
*[onmousedown],
*[onmouseup],
*[ontouchstart],
*[ontouchend],
*[role='button'],
*[role='tab'],
*[role='menuitem'],
*[role='option'],
*[tabindex='0'],
*[tabindex]:not([tabindex='-1']),
button,
input,
select,
textarea,
a,
label,
.generate-btn,
.download-btn,
.quiz-mode-btn,
.quick-action-btn,
.preset-button,
.export-button,
.import-button,
.exit-quiz-btn,
.retry-quiz-btn,
.submit-answer-btn,
.nav-btn,
.exit-quiz-btn-small,
.language-select,
.problems-stat,
.stat-card,
.action-card,
.quick-action-card,
.message-dismiss,
.preset-card,
.problem-item,
.button-group > *,
.form-row button,
.form-row input,
.form-row select,
.form-input,
.form-select,
.form-checkbox,
.operations-select {
  box-sizing: border-box !important;
  min-width: 44px !important;

  /* WCAG 2.2 AAA: Minimum 44x44px touch targets */
  min-height: 44px !important;

  /* Ensure touch targets are properly padded */
  padding: 12px 16px !important;

  /* Ensure adequate spacing between touch targets */
  margin: 2px !important;
}

/* Special handling for checkboxes and radio buttons */
input[type='checkbox'],
input[type='radio'],
.form-checkbox {
  position: relative;
  min-width: 44px !important;
  min-height: 44px !important;

  /* Use padding to create the touch target while keeping visual size appropriate */
  padding: 12px !important;
}

input[type='checkbox']::before,
input[type='radio']::before,
.form-checkbox::before {
  position: absolute;
  inset: -12px;
  z-index: -1;
  min-width: 44px;
  min-height: 44px;
  content: '';
}

/* Form elements specific adjustments */
input,
select,
textarea,
.form-input,
.form-select {
  padding: 12px !important;
  font-size: 16px !important; /* Prevent iOS zoom */
  line-height: 1.2 !important;
}

/* Special handling for quick-action-btn */
.quick-action-btn {
  box-sizing: border-box !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-width: 120px !important;
  min-height: 60px !important;
  padding: 12px 16px !important;
  line-height: 1.2 !important;
}

/* Special handling for problem items */
.problem-item {
  box-sizing: border-box !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-width: 44px !important;
  min-height: 44px !important;
  padding: 12px 16px !important;
  text-align: center !important;
  word-break: break-word !important;
  overflow-wrap: break-word !important;
}

/* Button group specific overrides */
.button-group {
  gap: 8px !important; /* Ensure adequate spacing between buttons */
}

.button-group > * {
  min-width: 120px !important; /* Ensure buttons are wide enough for text */
}

/* WCAG 2.2 AAA Mobile-specific overrides */
@media (width <= 768px) {
  /* Enhanced mobile touch targets */
  *[onclick],
  *[onmousedown],
  *[onmouseup],
  *[ontouchstart],
  *[ontouchend],
  *[role='button'],
  *[role='tab'],
  *[role='menuitem'],
  *[role='option'],
  *[tabindex='0'],
  *[tabindex]:not([tabindex='-1']),
  button,
  input,
  select,
  textarea,
  a,
  label,
  .generate-btn,
  .download-btn,
  .quiz-mode-btn,
  .quick-action-btn,
  .preset-button,
  .export-button,
  .import-button,
  .exit-quiz-btn,
  .retry-quiz-btn,
  .submit-answer-btn,
  .nav-btn,
  .exit-quiz-btn-small,
  .language-select,
  .problems-stat,
  .stat-card,
  .action-card,
  .quick-action-card,
  .message-dismiss,
  .preset-card,
  .problem-item,
  .button-group > *,
  .form-row button,
  .form-row input,
  .form-row select,
  .form-input,
  .form-select,
  .form-checkbox,
  .operations-select {
    min-width: 48px !important;

    /* WCAG 2.2 AAA: Enhanced mobile touch targets (48px recommended) */
    min-height: 48px !important;
    padding: 14px 18px !important;
    margin: 4px !important;
  }

  /* Form elements mobile adjustments */
  input,
  select,
  textarea,
  .form-input,
  .form-select {
    padding: 14px !important;
    font-size: 16px !important; /* Prevent iOS zoom */
  }

  input[type='checkbox'],
  input[type='radio'],
  .form-checkbox {
    min-width: 48px !important;
    min-height: 48px !important;
    padding: 14px !important;
  }

  .quick-action-btn {
    min-width: 140px !important;
    min-height: 64px !important;
    padding: 14px 18px !important;
  }

  .operations-select,
  select[multiple] {
    min-height: 140px !important;
    padding: 14px !important;
  }

  .button-group > * {
    min-width: 140px !important;
  }
}

/* Extra small screens - maximum accessibility */
@media (width <= 480px) {
  /* Ultra-aggressive touch target enforcement */
  *[onclick],
  *[onmousedown],
  *[onmouseup],
  *[ontouchstart],
  *[ontouchend],
  *[role='button'],
  *[role='tab'],
  *[role='menuitem'],
  *[role='option'],
  *[tabindex='0'],
  *[tabindex]:not([tabindex='-1']),
  button,
  input,
  select,
  textarea,
  a,
  label,
  .generate-btn,
  .download-btn,
  .quiz-mode-btn,
  .quick-action-btn,
  .preset-button,
  .export-button,
  .import-button,
  .exit-quiz-btn,
  .retry-quiz-btn,
  .submit-answer-btn,
  .nav-btn,
  .exit-quiz-btn-small,
  .language-select,
  .problems-stat,
  .stat-card,
  .action-card,
  .quick-action-card,
  .message-dismiss,
  .preset-card,
  .problem-item,
  .button-group > *,
  .form-row button,
  .form-row input,
  .form-row select,
  .form-input,
  .form-select,
  .form-checkbox,
  .operations-select {
    min-width: 50px !important;

    /* WCAG 2.2 AAA: Extra large touch targets for very small screens */
    min-height: 50px !important;
    padding: 16px 20px !important;
    margin: 6px !important;
  }

  /* Form elements ultra-mobile adjustments */
  input,
  select,
  textarea,
  .form-input,
  .form-select {
    padding: 16px !important;
    font-size: 16px !important;
    line-height: 1.2 !important;
  }

  input[type='checkbox'],
  input[type='radio'],
  .form-checkbox {
    min-width: 50px !important;
    min-height: 50px !important;
    padding: 16px !important;
  }

  .quick-action-btn {
    min-width: 160px !important;
    min-height: 68px !important;
    padding: 16px 20px !important;
  }

  .operations-select,
  select[multiple] {
    min-height: 160px !important;
    padding: 16px !important;
  }

  .button-group > * {
    min-width: 160px !important;
  }
}

/* WCAG 2.2 AAA: Specific button class overrides */
button.generate-btn,
button.download-btn,
button.quiz-mode-btn,
.button-group button.generate-btn,
.button-group button.download-btn,
.button-group button.quiz-mode-btn {
  box-sizing: border-box !important;
  display: inline-flex !important;
  gap: 8px !important;
  align-items: center !important;
  justify-content: center !important;
  min-width: 160px !important;
  min-height: 44px !important;
  padding: 12px 16px !important;
}

/* Mobile specific button overrides */
@media (width <= 768px) {
  button.generate-btn,
  button.download-btn,
  button.quiz-mode-btn,
  .button-group button.generate-btn,
  .button-group button.download-btn,
  .button-group button.quiz-mode-btn {
    min-width: 140px !important;
    min-height: 48px !important;
    padding: 14px 18px !important;
  }
}

@media (width <= 480px) {
  button.generate-btn,
  button.download-btn,
  button.quiz-mode-btn,
  .button-group button.generate-btn,
  .button-group button.download-btn,
  .button-group button.quiz-mode-btn {
    min-width: 160px !important;
    min-height: 50px !important;
    padding: 16px 20px !important;
  }
}

/* WCAG 2.2 AAA: Enhanced focus indicators */
*:focus,
*:focus-visible {
  outline: 3px solid #4f46e5 !important;
  outline-offset: 2px !important;

  /* Ensure focus is visible on mobile */
  border-radius: 4px !important;

  /* High contrast focus ring for all backgrounds */
  box-shadow:
    0 0 0 2px #fff,
    0 0 0 5px #4f46e5,
    0 0 8px rgb(79 70 229 / 30%) !important;
}

/* WCAG 2.2 AAA: Ensure all interactive elements are keyboard accessible */
button:not([tabindex='-1']),
input:not([tabindex='-1']),
select:not([tabindex='-1']),
textarea:not([tabindex='-1']),
[role='button']:not([tabindex='-1']),
[onclick]:not([tabindex='-1']),
a[href]:not([tabindex='-1']) {
  /* Ensure all interactive elements are focusable */
  -webkit-tap-highlight-color: rgb(79 70 229 / 20%);
}

/* WCAG 2.2 AAA: Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    transition-duration: 0.01ms !important;
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    scroll-behavior: auto !important;
  }
}

/* WCAG 2.2 AAA: High contrast mode support */
@media (prefers-contrast: high) {
  button,
  input,
  select,
  textarea,
  [role='button'] {
    color: ButtonText !important;
    background-color: ButtonFace !important;
    border: 2px solid currentcolor !important;
  }

  *:focus,
  *:focus-visible {
    outline: 3px solid Highlight !important;
    outline-offset: 2px !important;
    box-shadow: none !important;
  }
}

/* WCAG 2.2 AAA: Color scheme support */
@media (prefers-color-scheme: dark) {
  *:focus,
  *:focus-visible {
    box-shadow:
      0 0 0 2px #000,
      0 0 0 5px #6366f1,
      0 0 8px rgb(99 102 241 / 30%) !important;
  }
}

/* Ensure buttons are visible and clickable */
.generate-btn,
.download-btn,
.quiz-mode-btn {
  display: inline-flex !important;
  visibility: visible !important;
  pointer-events: auto !important;
  opacity: 1 !important;
}
